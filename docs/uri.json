{
  "folders": [
    "design-survey",
    "customize-question-types"
  ],
  "rename": {
    "design-survey-question-titles": "design-survey-configure-question-titles",
    "design-survey-conditional-display": "design-survey-conditional-logic",
    "design-survey-predefine-answers": "design-survey-pre-populate-form-fields",
    "localization": "survey-localization",
    "handle-survey-results-access": "access-and-modify-survey-results",
    "handle-survey-results-store": "how-to-store-survey-results",
    "handle-survey-results-continue-incomplete": "how-to-save-and-restore-incomplete-survey"
  },
  "classRename": {
    "surveymodel": "survey-data-model",
    "pagemodel": "page-model",
    "popupsurveymodel": "pop-up-survey-model",
    "questiontextmodel": "text-entry-question-model",
    "questioncheckboxmodel": "checkbox-question-model",
    "questionrankingmodel": "ranking-question-model",
    "questionradiogroupmodel": "radio-button-question-model",
    "questiondropdownmodel": "dropdown-menu-model",
    "questiontagboxmodel": "dropdown-tag-box-model",
    "questioncommentmodel": "comment-field-model",
    "questionratingmodel": "rating-scale-question-model",
    "questionimagepickermodel": "image-picker-question-model",
    "questionbooleanmodel": "boolean-question-model",
    "questionimagemodel": "add-image-to-survey",
    "questionhtmlmodel": "add-custom-html-to-survey",
    "questionsignaturepadmodel": "signature-pad-model",
    "questionexpressionmodel": "expression-model",
    "questionfilemodel": "file-model",
    "questionmatrixmodel": "matrix-table-question-model",
    "panelmodel": "panel-model",
    "questionpaneldynamicmodel": "dynamic-panel-model",
    "questionmultipletextmodel": "multiple-text-entry-question-model",
    "questionmatrixdynamicmodel": "dynamic-matrix-table-question-model",
    "questionmatrixdropdownmodel": "matrix-table-with-dropdown-list"
  }
}

Here are the additional sections for your documentation:

### Behavioral Differences Between Authentication Systems

#### Forms Authentication vs. Auth0 + Forms Hybrid System

After integrating Auth0 with the existing Forms Authentication system, some behavioral differences may be observed:

- **Session Management**: The hybrid system manages sessions differently due to two authentication layers. Inconsistent behavior can occur if either layer's state becomes corrupted.

- **Login/Logout Sequence**: With dual authentication systems, proper login and logout sequences are critical. Improper logout (such as closing a tab instead of clicking logout) can leave authentication artifacts that cause inconsistent behavior.

- **Multi-Tab Behavior**: The original Forms Authentication had simpler multi-tab behavior. The hybrid system requires additional mechanisms (timestamp cookies, redirect counters, etc.) to maintain consistency across tabs.

- **Login Redirects**: The Forms-only system had a single redirect path. The hybrid system has more complex redirect chains involving Auth0, which can sometimes behave differently depending on the specific navigation path.

If you encounter unexpected behavior (redirect loops, incorrect authentication state, access denied errors when you should be authenticated):

1. **Close all browser tabs/windows**
2. **Clear browser cookies** (or use incognito mode)
3. **Restart the browser**
4. **Initiate a fresh login**

This ensures both authentication layers start from a clean state.

### HTTPS Configuration Requirements

#### Why HTTPS is Required

Auth0 requires secure connections for callbacks and redirects for security reasons. Without HTTPS:

1. Auth0 will refuse to redirect to non-HTTPS URLs
2. Authentication tokens would be transmitted insecurely
3. Cookies may not be set properly due to secure flag requirements

#### Configuring HTTPS in IIS for Local Development

1. **Create Self-Signed Certificate**:
   - Open IIS Manager
   - Select your server in the left panel
   - Double-click "Server Certificates"
   - In the right Actions panel, click "Create Self-Signed Certificate"
   - Enter a friendly name (e.g., "EHealthLocal")
   - Set certificate store to "Personal"
   - Click OK

2. **Configure Website Binding**:
   - In IIS Manager, select your website
   - In the right Actions panel, click "Bindings"
   - Click "Add"
   - Select Type: https
   - Set IP Address: Your VM's IP address (or All Unassigned)
   - Port: 443
   - SSL Certificate: Select the certificate you created
   - Click OK

3. **Trust the Certificate (Client Side)**:
   - Export the certificate from IIS Manager (Server Certificates â†’ Export)
   - On client machines, import the certificate to "Trusted Root Certification Authorities"

4. **Update web.config or Application Settings**:
   - Ensure all URLs in your configuration use HTTPS

#### Accessing the Application

Access your application using the format:
```
https://[VM-IP-ADDRESS]/EHealth
```

### Auth0 Configuration Requirements

#### Email Address Requirements

A unique email address is required in both the application database and Auth0:

- The email address serves as the unique identifier linking Auth0 users to application users
- Ensure email addresses in your database match exactly with those in Auth0
- Case sensitivity may matter depending on Auth0 settings
- Update both systems when email addresses change

#### Auth0 Application Configuration

For each environment (development, test, production), configure the Auth0 application:

1. **Allowed Callback URLs**:
   - Add your VM's IP with HTTPS: `https://[VM-IP-ADDRESS]/Account/UserInfo`
   - Add localhost for development: `https://localhost/Account/UserInfo`
   - Add any additional environments

2. **Allowed Logout URLs**:
   - Add your VM's IP with HTTPS: `https://[VM-IP-ADDRESS]/Account/Index`
   - Add localhost for development: `https://localhost/Account/Index`
   - Add any additional environments

3. **Allowed Web Origins**:
   - Add your VM's IP with HTTPS: `https://[VM-IP-ADDRESS]`
   - Add localhost for development: `https://localhost`
   - Add any additional environments

4. **Application Type**:
   - Set to "Regular Web Application"

5. **Token Endpoint Authentication Method**:
   - Set to "Post"

#### Application Configuration Settings

Update your Settings.config file to match Auth0 configuration:

```xml
<appSettings>
  <add key="Auth0:Domain" value="your-tenant.auth0.com" />
  <add key="Auth0:ClientId" value="your-client-id" />
  <add key="Auth0:ClientSecret" value="your-client-secret" />
  <add key="Auth0:RedirectUri" value="https://[VM-IP-ADDRESS]/Account/UserInfo" />
  <add key="Auth0:PostLogoutRedirectUri" value="https://[VM-IP-ADDRESS]/Account/Index" />
  <add key="Auth0:MobileClientId" value="your-mobile-client-id" />
</appSettings>
```

Ensure these settings match exactly with your Auth0 application settings. When deploying to different environments, update these settings to match the environment-specific URLs.

Note: For development environments, you can use multiple redirect URIs in Auth0, but your application config should use the specific URL for that environment.
